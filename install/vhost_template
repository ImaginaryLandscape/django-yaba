<VirtualHost *:80>                                                                                                                                                                 
    ServerAdmin webmaster@DOMAIN_NAME                                                                                                                                                         
    ServerName HOST_NAME.DOMAIN_NAME                                                                                                                                                                
    # SuexecUserGroup: Sets the domain to run as a specific user when
    # executing processes.                                           
    # SuexecUserGroup USER GROUP                                     

    # DocumentRoot: The directory out of which you will serve your
    # documents. By default, all requests are taken from this directory, but
    # symbolic links and aliases may be used to point to other locations.   
    DocumentRoot /var/www/domains/DOMAIN_NAME/HOST_NAME/django_yaba                  

    # if not specified, the global error log is used
    # If logging to standard access and error logs comment the cronlog line and uncomment below
    ##ErrorLog /var/www/domains/DOMAIN_NAME/HOST_NAME/logs/error_log                               
    ##CustomLog /var/www/domains/DOMAIN_NAME/HOST_NAME/logs/access_log combined                    

    # Default logging is now Cronolog, please make sure cronolog is installed before restarting Apache.
    ErrorLog "|/usr/sbin/cronolog -l /var/www/domains/DOMAIN_NAME/HOST_NAME/logs/error_log /var/www/domains/DOMAIN_NAME/HOST_NAME/logs/%Y/%Y-%m-error_log"
    CustomLog "|/usr/sbin/cronolog -l /var/www/domains/DOMAIN_NAME/HOST_NAME/logs/access_log /var/www/domains/DOMAIN_NAME/HOST_NAME/logs/%Y/%Y-%m-access_log" combined

    # Do not lose time with IP address lookups
    HostnameLookups Off                       

    # Needed for named virtual hosts
    UseCanonicalName Off            

    # Configures the footer on server-generated documents
    ServerSignature On                                   

    ScriptAlias /cgi-bin "/var/www/domains/DOMAIN_NAME/HOST_NAME/cgi-bin"

    RewriteEngine On
    RewriteRule ^/downloads/(.*) /media/downloads/$1 [R=301,L,NC]

    <Directory "/var/www/domains/DOMAIN_NAME/HOST_NAME/cgi-bin">
        AllowOverride None                                  
        Options None                                        
        Order allow,deny                                    
        Allow from all                                      
    </Directory>                                            

    <Directory /var/www/domains/DOMAIN_NAME/HOST_NAME/django_yaba>
        Options -Indexes ExecCGI FollowSymLinks          
        AllowOverride All                                
    </Directory>                                         

    <Location />
         # Insert filter
         SetOutputFilter DEFLATE

         # Netscape 4.x has some problems...
         BrowserMatch ^Mozilla/4 gzip-only-text/html

         # Netscape 4.06-4.08 have some more problems
         BrowserMatch ^Mozilla/4\.0[678] no-gzip

         # MSIE masquerades as Netscape, but it is fine
         BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

         # NOTE: Due to a bug in mod_setenvif up to Apache 2.0.48
         # the above regex won't work. You can use the following
         # workaround to get the desired effect:
         #BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html

         # Don't compress images
         SetEnvIfNoCase Request_URI \
         \.(?:gif|jpe?g|png)$ no-gzip dont-vary

         # Make sure proxies don't deliver the wrong content
         Header append Vary User-Agent env=!dont-vary

         ExpiresActive On
         ExpiresByType image/gif "access plus 4 weeks"
         ExpiresByType image/png "access plus 4 weeks"
         ExpiresByType image/jpeg "access plus 4 weeks"
         ExpiresByType image/jpg "access plus 4 weeks"
         ExpiresByType text/javascript "access plus 4 weeks"
         #This is a dup of the above, but seemed to be needed in some test cases.
         ExpiresByType text/js "access plus 4 weeks"
         ExpiresByType text/css "access plus 4 weeks"

    </Location>
    # End modification

     Alias /media /var/www/domains/DOMAIN_NAME/HOST_NAME/django_yaba/media
     Alias /adminmedia /var/www/domains/DOMAIN_NAME/HOST_NAME/django_yaba/adminmedia
     WSGIScriptAlias / /var/www/domains/DOMAIN_NAME/HOST_NAME/django_yaba/yaba.wsgi


</VirtualHost>

